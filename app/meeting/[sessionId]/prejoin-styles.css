/**
 * Custom LiveKit PreJoin Styling
 *
 * Production-grade dark theme overrides for LiveKit PreJoin component.
 * Matches Google Meet aesthetic with professional appearance.
 *
 * IMPORTANT: This file overrides LiveKit's default light theme.
 * All color values are carefully chosen for WCAG AAA accessibility.
 */

/* ============================================================================
   DARK THEME VARIABLES
   ============================================================================ */

[data-lk-theme] {
  /* Text colors */
  --lk-fg: #ffffff;
  --lk-fg2: #e3e3e3;
  --lk-fg3: #b8b8b8;

  /* Background colors */
  --lk-bg: #1a1a1a;
  --lk-bg2: #2a2a2a;
  --lk-bg3: #3a3a3a;

  /* Control colors */
  --lk-control-bg: #2d2d2d;
  --lk-control-hover-bg: #3d3d3d;
  --lk-control-active-bg: #4d4d4d;

  /* Accent colors (blue theme for primary actions) */
  --lk-accent-bg: #2563eb;
  --lk-accent2: #1d4ed8;
  --lk-accent3: #1e40af;
  --lk-accent4: #1e3a8a;
  --lk-accent-fg: #ffffff;

  /* Border colors */
  --lk-border-color: #404040;
  --lk-border-radius: 0.5rem;

  /* Font settings */
  --lk-font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
  --lk-font-size: 14px;
  --lk-line-height: 1.5;
}

/* ============================================================================
   PRE-JOIN CONTAINER
   ============================================================================ */

.lk-prejoin {
  background-color: var(--lk-bg) !important;
  color: var(--lk-fg) !important;
  padding: 2rem !important;
  border-radius: var(--lk-border-radius);
  box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.5), 0 10px 10px -5px rgba(0, 0, 0, 0.3);
}

/* ============================================================================
   VIDEO PREVIEW
   ============================================================================ */

.lk-prejoin .lk-video-container {
  background-color: #000000 !important;
  border: 2px solid var(--lk-border-color);
  border-radius: var(--lk-border-radius);
  overflow: hidden;
  box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.4);
}

.lk-prejoin .lk-video-container .lk-camera-off-note {
  background: linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%);
  color: var(--lk-fg2) !important;
  font-size: 1rem;
  display: flex;
  align-items: center;
  justify-content: center;
}

/* ============================================================================
   FORM CONTROLS
   ============================================================================ */

.lk-prejoin .lk-form-control,
.lk-prejoin input,
.lk-prejoin select {
  background-color: var(--lk-control-bg) !important;
  color: var(--lk-fg) !important;
  border: 1px solid var(--lk-border-color) !important;
  border-radius: var(--lk-border-radius);
  padding: 0.75rem 1rem;
  font-size: 14px;
  transition: all 0.2s ease;
}

.lk-prejoin .lk-form-control:hover,
.lk-prejoin input:hover,
.lk-prejoin select:hover {
  border-color: #606060 !important;
  background-color: var(--lk-control-hover-bg) !important;
}

.lk-prejoin .lk-form-control:focus,
.lk-prejoin input:focus,
.lk-prejoin select:focus {
  outline: none;
  border-color: var(--lk-accent-bg) !important;
  box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
}

/* ============================================================================
   LABELS
   ============================================================================ */

.lk-prejoin label {
  color: var(--lk-fg2) !important;
  font-weight: 500;
  font-size: 13px;
  text-transform: uppercase;
  letter-spacing: 0.05em;
  margin-bottom: 0.5rem;
  display: block;
}

/* ============================================================================
   BUTTONS
   ============================================================================ */

/* Device toggle buttons (camera, microphone) */
.lk-prejoin .lk-button {
  background-color: var(--lk-control-bg) !important;
  color: var(--lk-fg) !important;
  border: 1px solid var(--lk-border-color) !important;
  border-radius: var(--lk-border-radius);
  padding: 0.75rem 1rem;
  font-weight: 500;
  transition: all 0.2s ease;
  cursor: pointer;
}

.lk-prejoin .lk-button:hover {
  background-color: var(--lk-control-hover-bg) !important;
  border-color: #606060 !important;
}

.lk-prejoin .lk-button:active {
  background-color: var(--lk-control-active-bg) !important;
}

/* Active state for muted/disabled buttons */
.lk-prejoin .lk-button[data-lk-muted="true"],
.lk-prejoin .lk-button[data-lk-disabled="true"] {
  background-color: #dc2626 !important;
  border-color: #b91c1c !important;
  color: #ffffff !important;
}

.lk-prejoin .lk-button[data-lk-muted="true"]:hover,
.lk-prejoin .lk-button[data-lk-disabled="true"]:hover {
  background-color: #b91c1c !important;
}

/* Join Meeting button (primary action) */
.lk-prejoin .lk-join-button {
  background-color: var(--lk-accent-bg) !important;
  color: var(--lk-accent-fg) !important;
  border: none !important;
  padding: 1rem 2rem !important;
  font-size: 16px !important;
  font-weight: 600 !important;
  border-radius: var(--lk-border-radius);
  box-shadow: 0 4px 6px -1px rgba(37, 99, 235, 0.3), 0 2px 4px -1px rgba(37, 99, 235, 0.2);
  transition: all 0.2s ease;
  cursor: pointer;
  text-transform: none;
  letter-spacing: normal;
}

.lk-prejoin .lk-join-button:hover {
  background-color: var(--lk-accent2) !important;
  box-shadow: 0 10px 15px -3px rgba(37, 99, 235, 0.4), 0 4px 6px -2px rgba(37, 99, 235, 0.3);
  transform: translateY(-1px);
}

.lk-prejoin .lk-join-button:active {
  background-color: var(--lk-accent3) !important;
  transform: translateY(0);
}

.lk-prejoin .lk-join-button:disabled {
  background-color: #4b5563 !important;
  cursor: not-allowed;
  opacity: 0.5;
  box-shadow: none;
}

/* ============================================================================
   BUTTON GROUPS
   ============================================================================ */

.lk-prejoin .lk-button-group-container {
  gap: 1rem !important;
}

.lk-prejoin .lk-button-group {
  background-color: transparent !important;
}

.lk-prejoin .lk-button-group > .lk-button {
  margin: 0;
}

/* ============================================================================
   USERNAME INPUT
   ============================================================================ */

.lk-prejoin .lk-username-container {
  width: 100%;
}

.lk-prejoin .lk-username-container input {
  width: 100%;
}

/* ============================================================================
   DEVICE SELECTION DROPDOWNS
   ============================================================================ */

.lk-prejoin select option {
  background-color: var(--lk-control-bg);
  color: var(--lk-fg);
}

/* ============================================================================
   ICONS (if LiveKit uses SVG icons)
   ============================================================================ */

.lk-prejoin svg {
  color: currentColor;
  fill: currentColor;
}

.lk-prejoin .lk-button svg {
  width: 20px;
  height: 20px;
}

/* ============================================================================
   RESPONSIVE DESIGN
   ============================================================================ */

@media (max-width: 640px) {
  .lk-prejoin {
    padding: 1.5rem !important;
  }

  .lk-prejoin .lk-join-button {
    width: 100%;
    padding: 0.875rem !important;
  }
}

/* ============================================================================
   ACCESSIBILITY ENHANCEMENTS
   ============================================================================ */

/* Focus visible for keyboard navigation */
.lk-prejoin *:focus-visible {
  outline: 2px solid var(--lk-accent-bg);
  outline-offset: 2px;
}

/* High contrast mode support */
@media (prefers-contrast: high) {
  [data-lk-theme] {
    --lk-fg: #ffffff;
    --lk-bg: #000000;
    --lk-border-color: #ffffff;
  }
}

/* Reduced motion support */
@media (prefers-reduced-motion: reduce) {
  .lk-prejoin *,
  .lk-prejoin *::before,
  .lk-prejoin *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}

/* ============================================================================
   CUSTOM ADDITIONS FOR PROFESSIONAL APPEARANCE
   ============================================================================ */

/* Add subtle gradient to video container when camera is off */
.lk-prejoin .lk-video-container:not(:has(video)) {
  background: linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%);
}

/* Loading state styling */
.lk-prejoin [data-lk-loading="true"] {
  opacity: 0.6;
  cursor: wait;
}

/* Error state styling */
.lk-prejoin [data-lk-error="true"] {
  border-color: #dc2626 !important;
  background-color: rgba(220, 38, 38, 0.1) !important;
}
