================================================================================
                        SHARINGMINDS EMAIL CATALOG
================================================================================

Last Updated: January 2026
Source Code: lib/email.ts, lib/otp.ts
Sender Address: info.sharingminds@gmail.com (GMAIL_APP_USER)
Email Transport: Nodemailer via Gmail


================================================================================
                            EMAIL INDEX
================================================================================

#   EMAIL NAME                          TRIGGER                         RECIPIENT
--- ----------------------------------- ------------------------------- -----------
1   OTP Verification                    User signs up / requests OTP    User
2   Mentor Application Received         Mentor submits application      Applicant
3   Mentor Application Approved         Admin approves application      Mentor
4   Mentor Application Rejected         Admin rejects application       Mentor
5   Mentor Reverification Request       Admin requests more info        Mentor
6   Contact Enquiry Notification        Contact form submitted          Admins


================================================================================
                         EMAIL DETAILS
================================================================================


--------------------------------------------------------------------------------
1. OTP VERIFICATION EMAIL
--------------------------------------------------------------------------------

FILE:       lib/otp.ts
FUNCTION:   sendVerificationOtp(email)
TRIGGER:    When a user signs up or requests email verification
RECIPIENT:  The user's email address
SUBJECT:    "Your Verification Code"

AUDIT ACTIONS:
  - First time: email.auth.otp
  - Resend:     email.auth.otp.resend

WHEN SENT:
  - During user registration
  - When user requests to resend OTP
  - OTP expires in 10 minutes

BODY CONTENT:
  - Heading: "Email Verification"
  - Message: "Thank you for signing up. Please use the following code..."
  - OTP Code: 6-digit code displayed prominently
  - Expiry notice: "This code will expire in 10 minutes."


--------------------------------------------------------------------------------
2. MENTOR APPLICATION RECEIVED EMAIL
--------------------------------------------------------------------------------

FILE:       lib/email.ts
FUNCTION:   sendApplicationReceivedEmail(email, name)
TRIGGER:    After a mentor submits the application form successfully
RECIPIENT:  The applicant's email address
SUBJECT:    "We've Received Your SharingMinds Application!"

AUDIT ACTION: email.application.received

WHEN SENT:
  - Immediately after mentor application form submission
  - Called from mentor application API route

BODY CONTENT:
  - Heading: "Thank You for Applying to SharingMinds!" (Blue #0056b3)
  - Greeting: "Hi {name},"
  - Confirmation: "We've successfully received your application."
  - SLA: "We'll get back to you within 5-7 business days."
  - CTA Button: "Go to Dashboard" → /dashboard


--------------------------------------------------------------------------------
3. MENTOR APPLICATION APPROVED EMAIL
--------------------------------------------------------------------------------

FILE:       lib/email.ts
FUNCTION:   sendMentorApplicationApprovedEmail(email, name, couponCode?, options?)
TRIGGER:    When an admin approves a mentor application
RECIPIENT:  The mentor's email address
SUBJECT:    "Congratulations! Your SharingMinds Mentor Application is Approved"

AUDIT ACTION: email.mentor.approved

WHEN SENT:
  - When admin clicks "Approve" in admin dashboard
  - Called from mentor approval API route

OPTIONAL COUPON SECTION:
  If couponCode is provided, includes:
  - Box with dashed blue border (#0f62fe)
  - "Onboarding coupon unlocked"
  - Coupon code in large bold text (24px, 4px letter-spacing)
  - Usage instructions

BODY CONTENT:
  - Heading: "Congratulations, {name}!" (Blue #0056b3)
  - Welcome message
  - Next steps: "set up your availability and start connecting"
  - [Optional: Coupon section]
  - CTA Button: "Go to Dashboard" → /dashboard


--------------------------------------------------------------------------------
4. MENTOR APPLICATION REJECTED EMAIL
--------------------------------------------------------------------------------

FILE:       lib/email.ts
FUNCTION:   sendMentorApplicationRejectedEmail(email, name, notes)
TRIGGER:    When an admin rejects a mentor application
RECIPIENT:  The mentor's email address
SUBJECT:    "Important: Update Regarding Your SharingMinds Mentor Application"

AUDIT ACTION: email.mentor.rejected

WHEN SENT:
  - When admin clicks "Reject" in admin dashboard
  - Admin can provide rejection notes/reason

BODY CONTENT:
  - Heading: "Update on Your Mentor Application, {name}" (Red #e74c3c)
  - Thank you message
  - Rejection notice
  - [If notes provided]: "Reason for rejection:" + notes
  - Encouragement to reapply in future


--------------------------------------------------------------------------------
5. MENTOR APPLICATION REVERIFICATION REQUEST EMAIL
--------------------------------------------------------------------------------

FILE:       lib/email.ts
FUNCTION:   sendMentorApplicationReverificationRequestEmail(email, name, notes)
TRIGGER:    When reviewers need more information or updates
RECIPIENT:  The mentor's email address
SUBJECT:    "Action Required: Updates Needed for Your SharingMinds Mentor Application"

AUDIT ACTION: email.mentor.reverification_requested

WHEN SENT:
  - When admin requests additional information
  - When application needs corrections before approval

BODY CONTENT:
  - Heading: "Updates Requested for Your Mentor Application, {name}" (Orange #f39c12)
  - Thank you message
  - Request for additional info
  - [If notes provided]: "Details for updates:" + notes
  - Instructions to update via dashboard
  - CTA Button: "Go to Dashboard" → /dashboard


--------------------------------------------------------------------------------
6. CONTACT ENQUIRY NOTIFICATION (ADMIN)
--------------------------------------------------------------------------------

FILE:       app/api/contact/route.ts (presumed)
TRIGGER:    When the contact form is submitted on the website
RECIPIENT:  Admin email addresses
SUBJECT:    "New Contact Enquiry: {subject}"

WHEN SENT:
  - When a visitor submits the contact form
  - Notifies admins of new enquiries

BODY CONTENT:
  - Heading: "New Contact Enquiry" (Purple #4f46e5)
  - Name: Sender's name
  - Email: Sender's email
  - Subject: Enquiry subject
  - Message: Full message content in a styled box


================================================================================
                         TECHNICAL DETAILS
================================================================================

EMAIL TRANSPORT CONFIGURATION:
------------------------------
Service: Gmail
Auth:    Gmail App Password
User:    process.env.GMAIL_APP_USER
Pass:    process.env.GMAIL_APP_PASSWORD

REQUIRED ENVIRONMENT VARIABLES:
-------------------------------
GMAIL_APP_USER          - Gmail address for sending
GMAIL_APP_PASSWORD      - Gmail app password (not regular password)
NEXT_PUBLIC_BASE_URL    - Base URL for dashboard links


AUDIT LOGGING:
--------------
All emails are logged to the database via recordEmailEvent() from lib/audit.

Audit record includes:
  - action (email type identifier)
  - to (recipient email)
  - subject
  - template name
  - actor type (usually 'system')
  - additional details


DATABASE TABLES:
----------------
email_events          - Stores all email send events
email_verifications   - Stores OTP codes and expiry times


================================================================================
                         EMAIL FLOW DIAGRAM
================================================================================

User Actions:
                                                    
  Sign Up ──────────────────┐                        
                            │                        
                            ▼                        
                    ┌───────────────┐               
                    │ OTP Email (#1)│               
                    └───────────────┘               
                                                    
Mentor Journey:                                     
                                                    
  Apply ────────────────────┐                        
                            │                        
                            ▼                        
                    ┌───────────────┐               
                    │ Received (#2) │               
                    └───────┬───────┘               
                            │                        
                     Admin Review                   
                            │                        
              ┌─────────────┼─────────────┐         
              ▼             ▼             ▼         
      ┌───────────┐ ┌───────────┐ ┌───────────────┐
      │ Approved  │ │ Rejected  │ │ Re-verify     │
      │   (#3)    │ │   (#4)    │ │     (#5)      │
      └───────────┘ └───────────┘ └───────────────┘


Contact Form:
                                                    
  Submit ───────────────────┐                        
                            │                        
                            ▼                        
                    ┌───────────────┐               
                    │ Admin Alert   │               
                    │     (#6)      │               
                    └───────────────┘               


================================================================================
                              END OF CATALOG
================================================================================